{"version":3,"sources":["../../../client/components/auth/router.decorator.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,CAAC,YAAW;;AAEZ,SAAO,CAAC,MAAM,CAAC,cAAc,CAAC,CAC3B,GAAG,CAAC,UAAS,UAAU,EAAE,MAAM,EAAE,IAAI,EAAE;;AAEtC,cAAU,CAAC,GAAG,CAAC,mBAAmB,EAAE,UAAS,KAAK,EAAE,IAAI,EAAE;AACxD,UAAI,CAAC,IAAI,CAAC,YAAY,EAAE;AACtB,eAAO;OACR;;AAED,UAAI,OAAO,IAAI,CAAC,YAAY,KAAK,QAAQ,EAAE;AACzC,YAAI,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAA,GAAG,EAAI;AAClD,cAAI,GAAG,EAAE;AACP,mBAAO;WACR;;AAED,eAAK,CAAC,cAAc,EAAE,CAAC;AACvB,iBAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAA,EAAE,EAAI;AACxC,kBAAM,CAAC,EAAE,CAAC,EAAE,GAAG,MAAM,GAAG,OAAO,CAAC,CAAC;WAClC,CAAC,CAAC;SACJ,CAAC,CAAC;OACJ,MAAM;AACL,YAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAA,EAAE,EAAI;AACjC,cAAI,EAAE,EAAE;AACN,mBAAO;WACR;;AAED,eAAK,CAAC,cAAc,EAAE,CAAC;AACvB,gBAAM,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;SACnB,CAAC,CAAC;OACJ;KACF,CAAC,CAAC;GACJ,CAAC,CAAC;CAEJ,CAAA,EAAG,CAAC","file":"router.decorator.js","sourcesContent":["'use strict';\r\n\r\n(function() {\r\n\r\nangular.module('meetApp.auth')\r\n  .run(function($rootScope, $state, Auth) {\r\n    // Redirect to login if route requires auth and the user is not logged in, or doesn't have required role\r\n    $rootScope.$on('$stateChangeStart', function(event, next) {\r\n      if (!next.authenticate) {\r\n        return;\r\n      }\r\n\r\n      if (typeof next.authenticate === 'string') {\r\n        Auth.hasRole(next.authenticate, _.noop).then(has => {\r\n          if (has) {\r\n            return;\r\n          }\r\n\r\n          event.preventDefault();\r\n          return Auth.isLoggedIn(_.noop).then(is => {\r\n            $state.go(is ? 'main' : 'login');\r\n          });\r\n        });\r\n      } else {\r\n        Auth.isLoggedIn(_.noop).then(is => {\r\n          if (is) {\r\n            return;\r\n          }\r\n\r\n          event.preventDefault();\r\n          $state.go('main');\r\n        });\r\n      }\r\n    });\r\n  });\r\n\r\n})();\r\n"]}