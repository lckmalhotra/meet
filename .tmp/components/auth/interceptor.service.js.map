{"version":3,"sources":["../../../client/components/auth/interceptor.service.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,CAAC,YAAW;;AAEZ,WAAS,eAAe,CAAC,UAAU,EAAE,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,EAAE;AAClE,QAAI,KAAK,CAAC;AACV,WAAO;;AAEL,aAAO,EAAA,iBAAC,MAAM,EAAE;AACd,cAAM,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,IAAI,EAAE,CAAC;AACtC,YAAI,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE;AAC1D,gBAAM,CAAC,OAAO,CAAC,aAAa,GAAG,SAAS,GAAG,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;SAClE;AACD,eAAO,MAAM,CAAC;OACf;;;AAGD,mBAAa,EAAA,uBAAC,QAAQ,EAAE;AACtB,YAAI,QAAQ,CAAC,MAAM,KAAK,GAAG,EAAE;AAC3B,WAAC,KAAK,KAAK,KAAK,GAAG,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA,CAAC,CAAE,EAAE,CAAC,OAAO,CAAC,CAAC;;AAEzD,kBAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;SAC1B;AACD,eAAO,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;OAC5B;KACF,CAAC;GACH;;AAED,SAAO,CAAC,MAAM,CAAC,cAAc,CAAC,CAC3B,OAAO,CAAC,iBAAiB,EAAE,eAAe,CAAC,CAAC;CAE9C,CAAA,EAAG,CAAC","file":"interceptor.service.js","sourcesContent":["'use strict';\r\n\r\n(function() {\r\n\r\nfunction authInterceptor($rootScope, $q, $cookies, $injector, Util) {\r\n  var state;\r\n  return {\r\n    // Add authorization token to headers\r\n    request(config) {\r\n      config.headers = config.headers || {};\r\n      if ($cookies.get('token') && Util.isSameOrigin(config.url)) {\r\n        config.headers.Authorization = 'Bearer ' + $cookies.get('token');\r\n      }\r\n      return config;\r\n    },\r\n\r\n    // Intercept 401s and redirect you to login\r\n    responseError(response) {\r\n      if (response.status === 401) {\r\n        (state || (state = $injector.get('$state'))).go('login');\r\n        // remove any stale tokens\r\n        $cookies.remove('token');\r\n      }\r\n      return $q.reject(response);\r\n    }\r\n  };\r\n}\r\n\r\nangular.module('meetApp.auth')\r\n  .factory('authInterceptor', authInterceptor);\r\n\r\n})();\r\n"]}